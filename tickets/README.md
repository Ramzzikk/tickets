# ДЗ 4М. Система заказов на покупку билетов

## Описание
Система реализована в виде 2 микросервисов, в каждом из которых используются следующие инструменты:
* Ktor - HTTP-сервер и клиент, основа приложения
* Exposed + DAO - взаимодействие с СУБД в объектно-ориентированном формате
* Ktor Swagger-UI - автодокументация по стандарту OpenAPI с интерфейсом Swagger
* Akkurate - валидация данных от пользователей API 
* СУБД PostgreSQL

Для каждого микросервиса запускается собственная СУБД PostgreSQL, в которой автоматически создается БД
и необходимые таблицы. Базы данных изолированы сетями Docker - один сервис не может получить доступ к данным другого.
Между микросервисами настроена отдельная сеть для обмена данными без доступа к СУБД.

Ktor позволяет создавать модульные приложения - при необходимости можно отключать валидацию, авторизацию,
документацию и другие компоненты программы. Часть модулей находится в пакете plugins, часть вынесена в отдельные пакеты.
Такая архитектура обеспечивает легкий рефакторинг и расширение функционала.

## Подробнее
Описание эндпоинтов, переменных окружения и ссылки на документацию можно найти в соответствующих README проектов:
* [Сервис авторизации](auth/README.md)
* [Сервис оформления заказов](orders/README.md)

## Запуск
Для сборки и запуска проекта используются Docker и Docker Compose. Предварительно нужно создать и заполнить файлы .env,
подробнее про переменные окружения описано в README сервисов. После этого достаточно выполнить команду:
```bash
docker compose up --build -d
```
Будут собраны образы микросервисов и запущены контейнеры приложений и СУБД. Дополнительных настроек не требуется.

## Коллекция Postman
В корне проекта расположен файл [Tickets.postman_collection.json](Tickets.postman_collection.json), его можно импортировать для тестирования
работоспособности. При использовании браузерной версии Postman также потребуется установить Postman Desktop Agent, чтобы была возможность обращаться к localhost.