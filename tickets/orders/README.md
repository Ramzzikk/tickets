# Сервис оформления заказов на покупку билетов

## Описание
Сервис предназначен для оформления заказов на покупку билетов от зарегистрированных пользователей, а также для
предоставления информации о существующих в системе станциях. Полученные от пользователя токены проверяются в сервисе
авторизации на подлинность, только после этого пользователь может создать заказ. Статус заказов изменяется через
некоторое время после их создания случайно на SUCCESS или REJECTION.

## Переменные окружения
Для запуска приложения необходимо задать следующие переменные окружения в файле .env:
1. DEBUG - включает режим разработки, по умолчанию false. Только в режиме разработки доступна автодокументация.

Пример заполнения файла .env:
```bash
DEBUG=true
```
Шаблон файла расположен в файле .env.example, .env должен находиться в той же директории.

## Эндпоинты
Для всех запросов необходима передача JWT-токена, полученного в [сервисе авторизации](../auth/README.md).
1. Список созданных станций.
2. Список заказов текущего пользователя.
3. Информация о заказе по его идентификатору. Если заказ существует и принадлежит пользователю, возвращается объект
заказа.
4. Создание заказа по переданным точкам отправления и прибытия. Проверяются существование станций, а также совпадение
точек отправления и прибытия. Возвращается объект созданного заказа.

## Использование
При запуске при необходимости создаются необходимые для работы приложения таблицы. При первом запуске также создаются
5 станций:
1. Москва
2. Санкт-Петербург
3. Нижний Новгород
4. Казань
5. Екатеринбург

Эти идентификаторы можно использовать при тестировании сервиса.

По умолчанию приложение доступно по адресу [http://localhost:5500](http://localhost:5500), документация (при включенном
режиме разработки) доступна по адресу [http://localhost:5500/docs](http://localhost:5500/docs).Из документации можно скачать
OpenAPI-спецификацию.

При запуске из Docker Compose также автоматически запускается сервис изменения статусов заказов (его код расположен в
файле [OrdersProcessor.kt](src/main/kotlin/com/tickets/OrdersProcessor.kt)).